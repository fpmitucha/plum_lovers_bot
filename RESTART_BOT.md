# Инструкция по перезапуску бота

## Проблема
Команда `/whoami` не работает, потому что бот не перезапущен после внесения изменений в код.

## Что было изменено:
1. ✅ Удален обработчик команды `/start` из `src/bot/handlers/start.py`
2. ✅ Добавлен обработчик команды `/whoami` в `src/bot/handlers/help.py`
3. ✅ Обновлен список команд бота через API (теперь показываются только `/stats`, `/top`, `/help`, `/whoami`)
4. ✅ Добавлено логирование в обработчик `/whoami`

## Как перезапустить бота:

### Если бот запущен через systemd (Linux):
```bash
sudo systemctl restart bot_pls
# или
sudo systemctl restart your-bot-service-name
```

### Если бот запущен через screen:
```bash
# Найти screen с ботом
screen -ls

# Подключиться к screen
screen -r bot_session_name

# Остановить бота (Ctrl+C)
# Запустить заново
python run.py
# или
python -m src.bot.main

# Отключиться от screen (Ctrl+A, потом D)
```

### Если бот запущен напрямую:
```bash
# Остановить бота (Ctrl+C в терминале где он запущен)
# Или найти процесс и убить его
ps aux | grep python
kill <PID>

# Запустить заново
python run.py
# или
cd C:\Users\tyoms\Desktop\bot_pls
python run.py
```

### Если бот запущен в Windows:
1. Найти окно PowerShell/CMD где запущен бот
2. Нажать `Ctrl+C` для остановки
3. Запустить заново:
```powershell
python run.py
```

## Как проверить, что все работает:

1. После перезапуска бота откройте бота в Telegram
2. Отправьте команду `/whoami`
3. Бот должен ответить с вашей информацией:
   ```
   Ваша информация в Telegram:

   ID: 123456789
   Username: @your_username
   Имя: Ваше Имя
   ```

4. Проверьте логи бота - должны появиться записи:
   ```
   Команда /whoami вызвана пользователем 123456789
   Отправка ответа на /whoami пользователю 123456789
   ```

## Если команда все еще не работает:

1. Проверьте логи бота на наличие ошибок
2. Убедитесь, что файл `src/bot/handlers/help.py` был сохранен с изменениями
3. Убедитесь, что роутер `help_member.router` подключен в `src/bot/main.py` (строка 93)
4. Попробуйте отправить команду в личные сообщения боту (не в группе)

## Текущий статус команд:
- ✅ `/stats` — Статистика моей кармы
- ✅ `/top` — Топ пользователей по карме
- ✅ `/help` — Помощь и информация
- ✅ `/whoami` — Показать мой Telegram ID
- ❌ `/start` — УДАЛЕНА (больше не отображается)
